%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\documentclass{beamer}
\input{setup/preamble}
\usetheme{Boadilla}

%%%%%%%%% Title and First Slide %%%%%%%%%
\title[CIENFI]{Workshop CIENFI: Introducción al Análisis de Datos Espaciales en R}
\author[U. Icesi]{Eduard F. Martínez González, Ph.D.}
\institute[]{Centro de Investigación en Economía y Finanzas (CIENFI) \\ Universidad Icesi}
\date{Marzo 2025}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

%%%%%%%%% Slide: Title %%%%%%%%%
\begin{frame}
\titlepage
\end{frame}

%%%%%%%%% Slide: Motivación – John Snow y el Mapa del Cólera %%%%%%%%%
\begin{frame}{Motivación: John Snow y el Mapa del Cólera}
\begin{itemize}
    \item \textbf{Brote de cólera en el Soho de Londres (1854):}
    \begin{itemize}
        \item Aumento inusual de muertes concentradas en un área específica.
        \item Causa atribuida inicialmente a “miasmas” (aire contaminado).
    \end{itemize}
    \item \textbf{John Snow plantea una hipótesis alternativa:}
    \begin{itemize}
        \item El cólera no se transmite por el aire, sino por el agua.
    \end{itemize}
    \item \textbf{Recolección de datos y análisis:}
    \begin{itemize}
        \item Registra ubicaciones de muertes por cólera.
        \item Mapea los pozos de agua del vecindario.
    \end{itemize}
    \item \textbf{Visualización espacial y evidencia empírica que respalda su hipótesis:}
    \begin{itemize}
        \item Identifica un patrón claro alrededor de la bomba de agua en Broad Street.
        \item Se retira la manivela de la bomba; los casos disminuyen.
    \end{itemize}
\end{itemize}
\end{frame}

%%%%%%%%% Slide: Map Jhon Snow %%%%%%%%%
\begin{frame}{Motivación: John Snow y el Mapa del Cólera}
\begin{center}
\includegraphics[scale=0.16]{figures/map_jhon_snow.jpg}
\end{center}
\textit{Nota:} Tomado de \href{https://es.wikipedia.org/wiki/John_Snow\#/media/Archivo:Snow-cholera-map-1.jpg}{https://es.wikipedia.org}
\end{frame}
    
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Motivación}
\section{Espacio, Datos y Causalidad: Evidencia Reciente}
\begin{frame}[noframenumbering]
\tableofcontents[currentsection]
\end{frame}

%%%%%%%%% Slide:  %%%%%%%%%
\begin{frame}{¿Reducen las restricciones a la movilidad en motocicleta los niveles de crimen en áreas urbanas?}
\begin{center}
\includegraphics[scale=0.08]{figures/paper_motos}
\end{center}
\textit{Fuente:} \href{https://papers.ssrn.com/sol3/papers.cfm?abstract_id=4072147}{Martínez-González et al. (2022)}
\end{frame}

%%%%%%%%% Slide:  %%%%%%%%%
\begin{frame}{Restrictions on Urban Mobility and Crime: Evidence from Motorcycle Bans in Colombia}
\begin{itemize}
    \item \textbf{Datos:}
    \begin{itemize}
        \item Datos geo-referenciados de crímenes (100m x 100m).
        \item Restricciones aplicadas en distintas ciudades y momentos.
    \end{itemize}
    \item \textbf{Estrategia empírica:}
    \begin{itemize}
        \item \textit{Spatial Regression Discontinuity Design} (SRDD).
        \item Diferencias-en-diferencias con zonas tratadas, de spillover y de control.
    \end{itemize}
    \item \textbf{Resultados principales:}
    \begin{itemize}
        \item En la mayoría de los casos, las restricciones no reducen el crimen.
        \item Donde hay efectos, se observa desplazamiento espacial del crimen.
        \item Mejor orientar esfuerzos a políticas focalizadas y con alta precisión.
    \end{itemize}
\end{itemize}
\end{frame}

%%%%%%%%% Slide:  %%%%%%%%%
\begin{frame}{Midiendo el crecimiento económico desde el espacio}
\vspace{-0.5em}
\small
\textbf{Henderson, Storeygard y Weil (2012) – American Economic Review}
\begin{center}
\includegraphics[scale=0.25]{figures/paper_gdp_1}
\end{center}
\end{frame}

%%%%%%%%% Slide:  %%%%%%%%%
\begin{frame}{Luces desde el espacio como proxy de actividad económica}
\begin{center}
\includegraphics[scale=0.25]{figures/paper_gdp_2}
\end{center}
\textit{Fuente:} \href{https://doi.org/10.1257/aer.102.2.994}{Henderson et al. (2012)}
\end{frame}

%%%%%%%%% Slide:  %%%%%%%%%
\begin{frame}{Literatura adicional sobre PIB y datos satelitales}
\begin{itemize}
    \item \textbf{Examining the Economic Impact of COVID-19 in India through Daily Electricity Consumption and Nighttime Light Intensity} \\
    Autores: Robert C. M. Beyer, Sebastian Franco-Bedoya, Virgilio Galdo \\
    \href{https://www.sciencedirect.com/science/article/abs/pii/S0305750X20304149}{https://www.sciencedirect.com/science/article/abs/pii/S0305750X20304149}

    \item \textbf{Local GDP Estimates Around the World} \\
    Autores: Esteban Rossi-Hansberg, Jialing Zhang \\
    \href{https://bfi.uchicago.edu/working-papers/local-gdp-estimates-around-the-world/}{https://bfi.uchicago.edu/working-papers/local-gdp-estimates-around-the-world/}
    
    \item \textbf{How Much Should We Trust the Dictator’s GDP Growth Estimates?} \\
    Autor: Luis R. Martínez \\
    \href{https://www.journals.uchicago.edu/doi/10.1086/720458}{https://www.journals.uchicago.edu/doi/10.1086/720458}
\end{itemize}
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Introducción a Datos Espaciales}
\begin{frame}[noframenumbering]
\tableofcontents[currentsection]
\end{frame}

%%%%%%%%% Slide:  %%%%%%%%%
\begin{frame}{¿Qué es un GIS?}
\begin{itemize}
    \item Un \textbf{Sistema de Información Geográfica (GIS)} es una tecnología que integra software y hardware para capturar, almacenar, analizar y visualizar información georreferenciada.
    \item Permite representar fenómenos reales con una dimensión espacial.
    \item Aplicaciones en urbanismo, salud pública, transporte, medio ambiente, economía urbana, entre otros.
\end{itemize}
\vspace{0.8em}
\centering
\includegraphics[width=0.7\linewidth]{figures/gis_intro.png}
\end{frame}

%%%%%%%%% Slide:  %%%%%%%%%
\begin{frame}{Modelos y formatos de datos espaciales}
\small
\begin{itemize}
\item \textbf{Datos vectoriales:}
\begin{itemize}
    \item Representan objetos discretos mediante geometrías: puntos, líneas o polígonos.
    \item Ejemplos: árboles (punto), calles (línea), barrios (polígono).
    \item \textit{Formatos comunes:} \texttt{.shp}, \texttt{.geojson}, \texttt{.kml}, \texttt{.gpx}, \texttt{.gpkg}
\end{itemize}
\item \textbf{Datos raster:}
\begin{itemize}
    \item Representan variables continuas mediante una grilla de píxeles.
    \item Ejemplos: temperatura, altitud, cobertura vegetal.
    \item \textit{Formatos comunes:} \texttt{.tif/.tiff}, \texttt{.asc}, \texttt{.grd}, \texttt{.gri}
\end{itemize}
\item \textbf{Mixtos (vector + raster):}
\begin{itemize}
    \item Formatos que pueden almacenar ambos tipos de datos.
    \item \textit{Ejemplos:} \texttt{.sqlite}, \texttt{.gdb}, \texttt{.gpkg}
\end{itemize}
\end{itemize}
\end{frame}

%%%%%%%%% Slide:  %%%%%%%%%
\begin{frame}{Sistemas de Referencia de Coordenadas (CRS)}
\small
\begin{itemize}
    \item Todo objeto geográfico está asociado a un \textbf{CRS} (Coordinate Reference System) que define su ubicación sobre la Tierra.
    \item Cada CRS tiene un código estandarizado EPSG. Ejemplo: \texttt{WGS84 = EPSG:4326}.
    \begin{itemize}
        \item \textbf{Geográficos (SCG):} expresados en grados (latitud, longitud).
        \item \textbf{Proyectados (SCP):} expresados en metros, con proyecciones plana, cónica o cilíndrica.
    \end{itemize}
\end{itemize}
\vspace{-2.0em}
\centering
\includegraphics[width=1\linewidth]{figures/geographic_projected.png}
\end{frame}

%%%%%%%%% Slide:  %%%%%%%%%
\begin{frame}{Fuentes abiertas de datos espaciales (Colombia y mundo)}
\small
\textbf{Vectoriales:}
\begin{itemize}
    \item \textbf{IDECA (Bogotá):} mapas de barrios, manzanas, usos del suelo, equipamientos. \\
    \href{https://www.ideca.gov.co}{https://www.ideca.gov.co}
    
    \item \textbf{IGAC (Colombia):} cartografía básica y catastral a escala 1:25.000 y 1:100.000. \\
    \href{https://www.igac.gov.co}{https://www.igac.gov.co}
    
    \item \textbf{GeoSIVEL (Colombia):} límites veredales, rurales y rurales dispersos. \\
    \href{https://geoportal.dane.gov.co}{https://geoportal.dane.gov.co}

    \item \textbf{GeoJSON y Shape desde OSM:} a través del paquete \texttt{osmdata} (R) y Overpass API. \\
    \href{https://wiki.openstreetmap.org/wiki/Overpass_API}{Overpass API} — \texttt{osmdata} (R)

    \item \textbf{geobr (Brasil, Latinoamérica):} límites municipales y censales desde IBGE. \\
    \href{https://github.com/ipeaGIT/geobr}{geobr (R)}
\end{itemize}
\end{frame}

%%%%%%%%% Slide:  %%%%%%%%%
\begin{frame}{Fuentes abiertas de datos espaciales (Colombia y mundo)}
\small
\textbf{Raster:}
\begin{itemize}
    \item \textbf{NASA EarthData:} imágenes satelitales MODIS, VIIRS, LANDSAT. \\
    \href{https://earthdata.nasa.gov}{https://earthdata.nasa.gov}
    
    \item \textbf{Google Earth Engine (GEE):} acceso gratuito a datos multiespectrales globales. \\
    Compatible con R vía \texttt{rgee}.

    \item \textbf{WorldPop:} mapas de densidad poblacional a alta resolución. \\
    \href{https://www.worldpop.org}{https://www.worldpop.org}
    
    \item \textbf{Copernicus / Sentinel:} observación terrestre en tiempo casi real. \\
    \href{https://scihub.copernicus.eu}{https://scihub.copernicus.eu}
\end{itemize}

\vspace{0.5em}
\textit{APIs disponibles:} \texttt{osmdata}, \texttt{geobr}, \texttt{rgee}, \texttt{tidygeocoder}, \texttt{elevatr}, \texttt{WFS}
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Introducción al Ecosistema de Datos Espaciales en R}
\begin{frame}[noframenumbering]
\tableofcontents[currentsection]
\end{frame}

%%%%%%%%% Slide:  %%%%%%%%%
\begin{frame}{Ecosistema de paquetes espaciales en R}
\small
\begin{itemize}
    \item \textbf{Paquetes base:}
    \begin{itemize}
        \item \texttt{sf}: manejo de datos vectoriales con geometría simple.
        \item \texttt{terra}: sucesor de \texttt{raster} para datos espaciales tipo raster.
        \item \texttt{sp}: estructura antigua para datos espaciales (aún usada).
    \end{itemize}
    \item \textbf{Lectura, escritura y geometría:}
    \begin{itemize}
        \item \texttt{rgdal}: conexión con la librería GDAL para formatos espaciales.
        \item \texttt{rgeos}: operaciones geométricas basadas en GEOS.
    \end{itemize}
    \item \textbf{Visualización:}
    \begin{itemize}
        \item \texttt{tmap}: mapas temáticos.
        \item \texttt{mapview}, \texttt{leaflet}: visualización interactiva.
    \end{itemize}
    \item \textbf{Análisis espacial:}
    \begin{itemize}
        \item \texttt{spdep}: análisis de dependencia espacial.
        \item \texttt{gstat}: interpolación espacial (ej. kriging).
        \item \texttt{osmdata}, \texttt{geobr}, \texttt{tidygeocoder}: acceso a datos espaciales externos.
    \end{itemize}
\end{itemize}
\scriptsize
\textit{Fuente:} \href{https://github.com/r-spatial}{github.com/r-spatial}
\end{frame}

%%%%%%%%% Slide:  %%%%%%%%%
\begin{frame}{¿Qué es una Simple Feature y por qué usar \texttt{sf}?}
\small
\begin{itemize}
  \item \textbf{Breve historia:}
  \begin{itemize}
    \item En los 2000s, se utilizaba \texttt{sp}, junto con \texttt{rgdal} y \texttt{rgeos}.
    \item Desde 2016, \texttt{sf} se consolida como el nuevo estándar:
  \begin{itemize}
    \item Sintaxis más intuitiva.
    \item Mejor rendimiento y visualización.
    \item Integra lectura, análisis y escritura de datos espaciales.
  \end{itemize}
  \end{itemize}
    \item \textbf{Simple Features (SF)} es el estándar definido por la \textbf{OGC (Open Geospatial Consortium)}, que permite representar geometrías espaciales (puntos, líneas, polígonos, multipolígonos) de forma interoperable.
    \item En R, el paquete \texttt{sf} implementa este estándar, ofreciendo:
  \begin{itemize}
    \item Estructura basada en \texttt{data.frame} (cada fila = una observación).
    \item Columna especial \texttt{geometry} que almacena las geometrías.
    \item Atributos en columnas regulares; compatible con \texttt{tidyverse}.
  \end{itemize}
\end{itemize}
\textit{Más información:} \href{https://r-spatial.github.io/sf/}{https://r-spatial.github.io/sf/}
\end{frame}

%%%%%%%%% Slide:  %%%%%%%%%
\begin{frame}{¿Cómo luce un objeto \texttt{sf} en R?}
\begin{itemize}
    \item Es un \texttt{data.frame} con una columna \texttt{geometry}.
    \item Cada fila representa una entidad geográfica.
    \item Atributos: columnas tradicionales.
    \item Geometría: clase \texttt{sfc} con CRS asociado.
\end{itemize}
\centering
\includegraphics[width=0.95\linewidth]{figures/sf_console.png}
\end{frame}

%%%%%%%%% Slide:  %%%%%%%%%
\begin{frame}{¡Pasamos a la parte práctica!}
\vspace{1em}
\begin{itemize}
    \item Hemos finalizado la \textbf{introducción teórica al análisis de datos espaciales}.
    \item Ahora continuaremos con ejercicios prácticos en R usando \texttt{sf}, \texttt{osmdata}, \texttt{tidygeocoder} y otras herramientas.
    \item Todo el contenido práctico está disponible en el siguiente enlace:
\end{itemize}

\vspace{1.5em}
\begin{center}
\Large
\href{https://eduard-martinez.github.io/workshop/gis_in_r/lecture/parte-2.html}{\texttt{https://eduard-martinez.github.io}}
\end{center}

\vspace{1em}
\small
\textit{Recuerda tener R y RStudio listos, junto con los paquetes instalados. ¡Vamos al código!}
\end{frame}

%%%%%%%%% Slide: Gracias %%%%%%%%%
\begin{frame}
    \begin{center}
    \Huge Gracias!
    \end{center}
\end{frame}
\end{document}
